OPENAI_API_KEY=sk-proj-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
OPENROUTER_API_KEY=sk-or-v1-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
OPENROUTER_DEFAULT_MODEL=google/gemini-2.5-flash
PINECONE_API_KEY=pcsk_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
PINECONE_ENV=https://your-index-name.svc.region.pinecone.io
WEAVIATE_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
WEAVIATE_URL=https://your-cluster.weaviate.cloud
QDRANT_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
QDRANT_URL=https://your-cluster.qdrant.io
MISTRAL_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
MISTRAL_OCR_MODEL=mistral-ocr-latest
MISTRAL_API_BASE_URL=https://api.mistral.ai
ZOTERO_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXX
ZOTERO_USER_ID=12345
RESEND_API_KEY=re_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
RESEND_FROM_EMAIL=noreply@example.com
APP_URL=http://localhost:8000

# ===== UVICORN CONFIGURATION =====
# Workers: nombre de processus (recommandé: 1 par CPU core)
UVICORN_WORKERS=7
# Keep-alive timeout en secondes (pour processus longs)
UVICORN_TIMEOUT_KEEP_ALIVE=120
# Max requêtes simultanées par worker
UVICORN_LIMIT_CONCURRENCY=100

# ===== CONCURRENCY CONTROL =====
# Script workers (CPU-bound tasks)
DEFAULT_MAX_WORKERS=8           # ThreadPoolExecutor global
DEFAULT_DOC_WORKERS=6           # Documents en parallèle (chunking)
PDF_EXTRACTION_WORKERS=4        # PDFs en parallèle (OCR)

# API batching (rate limits)
DEFAULT_BATCH_SIZE_GPT=5        # Chunks/batch recodage GPT
DEFAULT_EMBEDDING_BATCH_SIZE=32 # Chunks/batch embeddings OpenAI

# LLM concurrency (global limit across all users)
MAX_CONCURRENT_LLM_CALLS=6      # Max appels LLM simultanés

# Vector DB upsert
PINECONE_BATCH_SIZE=100
WEAVIATE_BATCH_SIZE=100
QDRANT_BATCH_SIZE=100

# Session management
MAX_ACTIVE_SESSIONS=50          # Limite sessions simultanées
SESSION_TTL_HOURS=24            # Auto-cleanup après 24h

# ===== CELERY CONFIGURATION (Phase 3 - Production) =====
# Enable Celery task queue (set to 'true' for production)
ENABLE_CELERY=false

# Redis broker configuration
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Flower monitoring credentials
FLOWER_USER=admin
FLOWER_PASSWORD=changeme